<link rel="import" href="../polymer/polymer-element.html">

<!--
`touch-item`

@demo demo/index.html 
-->

<dom-module id="touch-item">
  <template>
    <style>
      :host {
        cursor: pointer;
        display: block;
        outline: 0;
      }

      :host([mouse-over]) {
        background: var(--touch-item-hover-bg-color, #f7f7f7) !important;
      }

      :host([disabled]) {
        pointer-events: none;
      }
    </style>

    <slot></slot>
  </template>

  <script>

    class TouchItem extends Polymer.Element {

      static get is() {return 'touch-item';}

      static get config() {
        return {
          hostAttributes: {
            'tabindex': '0'
          },

          properties: {

            mouseOver: {
              type: Boolean,
              reflectToAttribute: true,
              value: false
            },

            disabled: {
              type: Boolean,
              reflectToAttribute: true,
              value: false
            }

          }
        };
      }

      constructor() {
        super();

        this._onPointerOver = this._onPointerOver.bind(this);
        this._onPointerOut = this._onPointerOut.bind(this);
      }

      connectedCallback() {
        super.connectedCallback();
        this._toggleListeners(true);
      }

      disconnectedCallback() {
        super.disconnectedCallback();
        this._toggleListeners(false);
      }

      _toggleListeners(enable) {
        const m = enable ? 'addEventListener' : 'removeEventListener';

        this[m]('pointerover', this._onPointerOver);
        this[m]('pointerout', this._onPointerOut);
      }

      _onPointerOver(event) {
        this.mouseOver = event.pointerType === 'mouse';
      }

      _onPointerOut() {
        this.mouseOver = false;
      }

    }

    customElements.define(TouchItem.is, TouchItem);

  </script>
</dom-module>